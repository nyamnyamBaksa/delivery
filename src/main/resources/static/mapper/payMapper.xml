<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.delivery.web.pay.PayDAO">
	
	<select id="cartlist" parameterType="String" resultType="Map">
		select cno, mnname, camount, ctotal, mndesc, sname, mnimg, mnprice,
			SUM(ctotal) OVER (PARTITION BY mno) AS total
		from cartview
		where mno = (select mno from member where mid = #{mid})
	</select>
	
	<update id="updateQty" parameterType="Map">
		update cart set camount = #{qty}, ctotal = #{ctotal}
		where cno = #{cno}
	</update>
	
	<delete id="cartdel" parameterType="Integer">
		delete from cart
		where cno = #{cno}
	</delete>
	
</mapper>